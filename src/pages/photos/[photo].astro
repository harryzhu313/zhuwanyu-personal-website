---
import ExifImage from "../../components/ExifImage.astro";
import EntryLayout from "../../layouts/EntryLayout.astro";
import { getNotionPhotos } from "../../utils/notion-photos";

export async function getStaticPaths() {
  try {
    const validPhotos = await getNotionPhotos();
    console.log('ğŸ¯ åŠ¨æ€è·¯ç”±: æœ‰æ•ˆç…§ç‰‡æ•°é‡:', validPhotos?.length || 0);
    
    return validPhotos.map(photo => ({
      params: { photo: photo.slug },
      props: { photo }
    }));
  } catch (error) {
    console.error('âŒ åŠ¨æ€è·¯ç”±: ç”Ÿæˆé™æ€è·¯å¾„æ—¶å‡ºé”™:', error);
    return [];
  }
}

const { photo } = Astro.props;
---

<EntryLayout collection="photos" {...photo}>
  <ExifImage image={photo.image} exif={photo.exif} />
</EntryLayout>
